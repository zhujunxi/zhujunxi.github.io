---
title: 函数式编程
date: 2019-03-11 09:21:22
categories: [技术笔记]
tags: [js, es6]
---

假设我们有这样的需求，需要先把数组 foo 中的对象结构更改，然后从中挑选出一些符合条件的对象，并且把这些对象放进新数组 result 里。

```bash
let foo = [
  {
    name: "Stark",
    age: 21
  },
  {
    name: "Jarvis",
    age: 20
  },
  {
    name: "Pepper",
    age: 16
  }
];

//我们希望得到结构稍微不同，age大于16的对象：
let result = [
  {
    person: {
      name: "Stark",
      age: 21
    },
    friends: []
  },
  {
    person: {
      name: "Jarvis",
      age: 20
    },
    friends: []
  }
];
```
从直觉上我们很容易写出这样的代码：

```bash
let result = [];

//有时甚至是普通的for循环
foo.forEach(function(person){
    if(person.age > 16){
        let newItem = {
            person: person,
            friends: [];
        };
        result.push(newItem);
    }
})
```

使用函数式的写法，可以优雅得多

```bash
let result = foo
  .filter(person => person.age > 16)
  .map(person => ({
    person: person,
    friends: []
  }));
```

数组求和

```bash
let foo = [1, 2, 3, 4, 5];

//不优雅
function sum(arr) {
  let x = 0;
  for (let i = 0; i < arr.length; i++) {
    x += arr[i];
  }
  return x;
}
sum(foo); // => 15

//优雅
foo.reduce((a, b) => a + b); // => 15
```

### 摘抄自：
[2019 年编写现代 JavaScript 代码的5个小技巧](https://zhuanlan.zhihu.com/p/54758068)